!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("ngx-tour-core"),require("@angular/router"),require("@angular/material"),require("withinviewport"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-tour-md-menu",["exports","@angular/core","ngx-tour-core","@angular/router","@angular/material","withinviewport","rxjs/operators","@angular/common"],t):t(e["ngx-tour-md-menu"]={},e.ng.core,e.ngxTourCore,e.ng.router,e.ng.material,e.withinviewport,e.rxjs.operators,e.ng.common)}(this,function(e,t,n,r,o,i,a,u){"use strict";i=i&&i.hasOwnProperty("default")?i["default"]:i;var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function c(e,t){function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function p(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a}var l=function(){function e(e){this.renderer=e.createRenderer(null,null)}return e.prototype.show=function(e){var t=e.nativeElement.getBoundingClientRect();this.backdropElement||(this.backdropElement=this.renderer.createElement("div"),this.renderer.addClass(this.backdropElement,"ngx-tour_backdrop"),this.renderer.appendChild(document.body,this.backdropElement)),this.setStyles(t)},e.prototype.close=function(){this.backdropElement&&(this.renderer.removeChild(document.body,this.backdropElement),this.backdropElement=null)},e.prototype.setStyles=function(e){var t,r,n={position:"fixed",width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px","box-shadow":"0 0 0 9999px rgba(0, 0, 0, 0.7)","z-index":"100"};try{for(var o=function u(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}(Object.keys(n)),i=o.next();!i.done;i=o.next()){var a=i.value;this.renderer.setStyle(this.backdropElement,a,n[a])}}catch(s){t={error:s}}finally{try{i&&!i.done&&(r=o["return"])&&r.call(o)}finally{if(t)throw t.error}}},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:t.RendererFactory2}]},e}(),d=function(n){function e(e,t){var r=n.call(this,e)||this;return r.tourBackdrop=t,r}return c(e,n),e.prototype.hideStep=function(e){var t=this.anchors[e&&e.anchorId];t?(t.hideTourStep(),this.stepHide$.next(e)):this.tourBackdrop.close()},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:r.Router},{type:l}]},e}(n.TourService),m=function(){function e(){this.menu=new o.MatMenu(undefined,undefined,{xPosition:"after",yPosition:"below",overlapTrigger:!0,backdropClass:""})}return e.decorators=[{type:t.Component,args:[{selector:"tourAnchorOpener",template:'<span [matMenuTriggerFor]="menu" #trigger="matMenuTrigger"></span>',styles:[":host { display: none; }"]}]}],e.propDecorators={menu:[{type:t.Input}],trigger:[{type:t.ViewChild,args:[o.MatMenuTrigger]}]},e}(),h=function(){function e(){}return e.decorators=[{type:t.Injectable}],e}(),f=function(){function e(e,t,r,n,o,i,a){this.componentFactoryResolver=e,this.injector=t,this.viewContainer=r,this.element=n,this.tourService=o,this.tourStepTemplate=i,this.tourBackdrop=a,this.opener=this.viewContainer.createComponent(this.componentFactoryResolver.resolveComponentFactory(m)).instance}return e.prototype.ngOnInit=function(){this.tourService.register(this.tourAnchor,this)},e.prototype.ngOnDestroy=function(){this.tourService.unregister(this.tourAnchor)},e.prototype.showTourStep=function(e){var t=this;this.isActive=!0,(this.tourStepTemplate.templateComponent.step=e).preventScrolling||(i(this.element.nativeElement,{sides:"bottom"})?i(this.element.nativeElement,{sides:"left top right"})||this.element.nativeElement.scrollIntoView(!0):this.element.nativeElement.scrollIntoView(!1)),this.opener.trigger._element=this.element,this.opener.trigger.menu=this.tourStepTemplate.templateComponent.tourStep,this.opener.trigger.ngAfterContentInit(),this.opener.trigger.openMenu(),e.enableBackdrop?this.tourBackdrop.show(this.element):this.tourBackdrop.close(),e.prevBtnTitle=e.prevBtnTitle||"Prev",e.nextBtnTitle=e.nextBtnTitle||"Next",e.endBtnTitle=e.endBtnTitle||"End",this.menuCloseSubscription&&this.menuCloseSubscription.unsubscribe(),this.menuCloseSubscription=this.opener.trigger.menuClosed.pipe(a.first()).subscribe(function(){t.tourService.getStatus()!==n.TourState.OFF&&t.tourService.end(),t.tourBackdrop.close()})},e.prototype.hideTourStep=function(){this.isActive=!1,this.menuCloseSubscription&&this.menuCloseSubscription.unsubscribe(),this.opener.trigger.closeMenu(),this.tourService.getStatus()===n.TourState.OFF&&this.tourBackdrop.close()},e.decorators=[{type:t.Directive,args:[{selector:"[tourAnchor]"}]}],e.ctorParameters=function(){return[{type:t.ComponentFactoryResolver},{type:t.Injector},{type:t.ViewContainerRef},{type:t.ElementRef},{type:d},{type:h},{type:l}]},e.propDecorators={tourAnchor:[{type:t.Input}],isActive:[{type:t.HostBinding,args:["class.touranchor--is-active"]}]},e}(),g=function(n){function e(e,t){var r=n.call(this,t)||this;return r.tourStepTemplateService=e,r.tourService=t,r.step={},r}return c(e,n),e.prototype.ngAfterViewInit=function(){this.tourStepTemplateService.templateComponent=this},e.decorators=[{type:t.Component,args:[{selector:"tour-step-template",template:'\n    <mat-menu [overlapTrigger]="false" class="tour-step">\n      <ng-container *ngTemplateOutlet="stepTemplate || defaultTemplate; context: { step: step }"></ng-container>\n    </mat-menu>\n    <ng-template #defaultTemplate let-step="step">\n      <mat-card (click)="$event.stopPropagation()">\n        <mat-card-title>\n          {{step?.title}}\n        </mat-card-title>\n        <mat-card-content>\n          {{step?.content}}\n        </mat-card-content>\n        <mat-card-actions>\n          <button mat-icon-button [disabled]="!tourService.hasPrev(step)" (click)="tourService.prev()">\n            <mat-icon>chevron_left</mat-icon>\n          </button>\n          <button mat-icon-button [disabled]="!tourService.hasNext(step)" (click)="tourService.next()">\n            <mat-icon>chevron_right</mat-icon>\n          </button>\n          <button mat-button (click)="tourService.end()">{{step?.endBtnTitle}}</button>\n        </mat-card-actions>\n      </mat-card>\n    </ng-template>\n  ',styles:["\n      ::ng-deep .tour-step .mat-menu-content { \n          padding: 0 !important; \n      }\n  "]}]}],e.ctorParameters=function(){return[{type:h},{type:d}]},e.propDecorators={tourStep:[{type:t.ViewChild,args:[o.MatMenu]}],stepTemplate:[{type:t.Input},{type:t.ContentChild,args:[t.TemplateRef]}]},e}(n.TourHotkeyListenerComponent),y=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:function r(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}([h,l],n.TourModule.forRoot().providers,[d])}},e.decorators=[{type:t.NgModule,args:[{declarations:[f,g,m],entryComponents:[m],exports:[f,g,n.TourModule],imports:[u.CommonModule,n.TourModule,o.MatMenuModule,o.MatCardModule,o.MatButtonModule,o.MatIconModule]}]}],e}();e.TourService=d,e.TourMatMenuModule=y,e.TourAnchorMatMenuDirective=f,e.TourStepTemplateComponent=g,e.ɵa=d,e.ɵd=m,e.ɵb=l,e.ɵc=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-tour-md-menu.umd.min.js.map